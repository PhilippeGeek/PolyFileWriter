
ifeq ($(shell whoami)@$(shell uname -n),pvienne@tin)
	JDK_HOME=/usr/java/jdk1.7.0_05/
	jvs_sign_key=mykey
	project_home=/user/pvienne/home/Documents/GitHub/PolyFileWriter
	user_tmp_nav=~/.tmp
endif

clean:
	rm -rf build;
	rm -f polyfilewriter.jar;

build: clean
	mkdir build;
	javac -nowarn -d build src/org/javascool/polyfilewriter/Gateway.java\
	                src/org/javascool/tools/FileManager.java;

polyfilewriter.jar: build
	jar cvf0 polyfilewriter.jar -C build .

signedjar: polyfilewriter.jar
	${JDK_HOME}/bin/jarsigner polyfilewriter.jar ${jvs_sign_key}
	cp polyfilewriter.jar ../PolyFileWriter-JQuery

test: clean signedjar
	&chromium-browser --user-data-dir=${user_tmp_nav} "file://${project_home}/PolyFileWriter-JQuery/index.html"

